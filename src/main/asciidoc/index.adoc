= Authority API Documentation
COFOMO-Project, Ilko Hoffmann<ilkohoffmann@posteo.net>
0.0.1, 18.12.2019
:icons: font
:source-highlighter: highlightjs
:toc: left
:sectnums:

// tag::globalDoc[]

[cols="1,2,2", options="header"] 
|===
|Name
|URL
|Description

|icon:github[] GitHub
|link:https://github.com/cofomo-platform/authority[https://github.com/cofomo-platform/authority^]
|Repository of the authority project

|icon:book[] API-Documentation
|link:https://authority.cofomo.io[https://authority.cofomo.io^]
|Autogenerated up to date API documentation

|icon:check-square-o[] Swagger-UI
|link:https://authority.cofomo.io/swagger[https://authority.cofomo.io/swagger^]
|Interactive test suite of the API

|icon:rocket[] API
|link:https://authority.cofomo.io/api[https://authority.cofomo.io/api^]
|Authority API
|===

== Authentication API

=== New Section

This ius a new section.

=== JWT Payload

[source,options="nowrap"]
----	
{
  "sub": "cofomo",
  "exp": 1576690210,
  "iat": 1576672210,
  "consumer": {
    "id": "1",
    "username": "cofomo",
    "password": "***"
  }
}
----

=== Authenticate Mobility Consumer

==== Sample Request
include::{snippets}/authenticate/http-request.adoc[]

==== Sample Response
include::{snippets}/authenticate/http-response.adoc[]

== Authorization API

Collection of endpoints to manage authorizations of mobility consumers

=== Verifiable Claim Payload

[source,options="nowrap"]
----	
{
  "sub": "xMpCOKC5I4INzFCab3WEmw==",
  "vct_test": {
    "context": "https://www.w3.org/2018/credentials/v1",
    "type": "vct_test",
    "owner": "xMpCOKC5I4INzFCab3WEmw==",
    "issuer": "Authority of vct_test",
    "validation": "https://authority.cofomo.io/api/v1/authorization/validateClaim",
    "issuanceDate": "2019-12-18T10:39:43+0000"
  },
  "exp": 1576683583,
  "iat": 1576665583
}
----

=== Get Verifiable Claim

==== Sample Request
include::{snippets}/request-claim/http-request.adoc[]

==== Sample Response
include::{snippets}/request-claim/http-response.adoc[]


=== Validate Verifiable Claim

Validates the RSA256 signature of the VerifiableClaimToken.

==== Sample Request
include::{snippets}/validate-claim/http-request.adoc[]

==== Sample Response
include::{snippets}/validate-claim/http-response.adoc[]


== Consumer API

Collection of endpoints to manage Consumers. This is the implementation of the IConsumer interface.

=== Customer Model
include::{snippets}/consumer-get-by-id/response-fields.adoc[]

=== Get all Consumers

Get all Consumers

==== Sample Request
include::{snippets}/consumer-get-all/http-request.adoc[]

==== Sample Response
include::{snippets}/consumer-get-all/http-response.adoc[]


=== Get Consumer by Id

Get Consumer by Id

==== Sample Request
include::{snippets}/consumer-get-by-id/http-request.adoc[]

==== Sample Response
include::{snippets}/consumer-get-by-id/http-response.adoc[]


=== Create Consumer

Create new Consumer.

==== Request Body
include::{snippets}/consumer-create-consumer/request-fields.adoc[]

==== Sample Response
include::{snippets}/consumer-create-consumer/http-response.adoc[]


=== Update Consumer

Update Consumer.

==== Sample Request
include::{snippets}/consumer-update-consumer/http-request.adoc[]

==== Sample Response
include::{snippets}/consumer-update-consumer/http-response.adoc[]


=== Delete Consumer

Delete Consumer.

==== Sample Request
include::{snippets}/consumer-delete-consumer/http-request.adoc[]

==== Sample Response
include::{snippets}/consumer-delete-consumer/http-response.adoc[]


// end::globalDoc[]
